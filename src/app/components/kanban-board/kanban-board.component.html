<app-filter
  [filterQuery]="filterQuery()"
  [sortKey]="sortKey()"
  [sortDirection]="sortDirection()"
  (filterQueryChange)="onFilterQueryChange($event)"
  (sortKeyChange)="onSortKeyChange($event)"
  (sortDirectionChange)="onSortDirectionChange($event)"
></app-filter>

<!-- Loader displayed while tasks are being loaded -->

<!-- Kanban board layout with columns for each task status -->
<div class="kanban-board grid grid-cols-1 md:grid-cols-3 gap-4">
  <!-- Loop through each status and display the tasks associated with it -->
  @for(taskByStatus of tasksByStatus(); track taskByStatus.status){
  <div class="p-4 bg-gray-100 rounded flex flex-col">
    <!-- Display status header -->
    <h2 class="font-bold text-lg mb-4 text-center md:text-left">
      {{ taskByStatus.status }}
    </h2>

    <!-- Display message if no tasks are available for this status -->
    @if(taskByStatus.tasks.length === 0){ @if(isLoading$()){
    <app-skeleton-loader></app-skeleton-loader>
    } @else {
    <p class="text-gray-500 text-center md:text-left">No tasks available</p>
    } }

    <!-- Loop through each task and display the task component -->
    @for(task of filterAndSortTasks(taskByStatus.tasks); track task.id){

    <app-task
      [task]="task"
      (delete)="deleteTask($event)"
      (update)="updateTask($event)"
    ></app-task>
    }
  </div>
  }
</div>
